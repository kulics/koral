// 表达式求值器 - Token 类型定义

public type Token {
    IntLiteral(value Int),
    FloatLiteral(value Float64),
    Identifier(name String),
    Plus(),
    Minus(),
    Star(),
    Slash(),
    Percent(),
    Power(),
    Equals(),
    LeftParen(),
    RightParen(),
    Comma(),
    EOF(),
}

given Token {
    public to_string(self) String = when self is {
        .IntLiteral(v) then {
            let s = String.zero()
            s.push_string("IntLiteral(")
            s.push_int(v)
            s.push(')')
            s
        },
        .FloatLiteral(v) then {
            let s = String.zero()
            s.push_string("FloatLiteral(")
            s.push_float64(v)
            s.push(')')
            s
        },
        .Identifier(name) then {
            let s = String.zero()
            s.push_string("Identifier(")
            s.push_string(name)
            s.push(')')
            s
        },
        .Plus then "Plus",
        .Minus then "Minus",
        .Star then "Star",
        .Slash then "Slash",
        .Percent then "Percent",
        .Power then "Power",
        .Equals then "Equals",
        .LeftParen then "LeftParen",
        .RightParen then "RightParen",
        .Comma then "Comma",
        .EOF then "EOF",
    }
}
