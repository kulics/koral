// EXPECT: nanos_ok
// EXPECT: micros_ok
// EXPECT: millis_ok
// EXPECT: secs_ok
// EXPECT: mins_ok
// EXPECT: hours_ok
// EXPECT: nanos_normalized
// EXPECT: roundtrip_nanos
// EXPECT: roundtrip_micros
// EXPECT: roundtrip_millis
// EXPECT: roundtrip_secs
// EXPECT: roundtrip_mins
// EXPECT: roundtrip_hours

let main() Int = {
    // Test from_nanos: 1_500_000_000 ns = 1s 500_000_000ns
    let d1 = Duration.from_nanos(1_500_000_000)
    assert(d1.secs == (Int64)1, "nanos secs")
    assert(d1.nanos == (Int64)500_000_000, "nanos nanos")
    print_line("nanos_ok")

    // Test from_micros: 2_500_000 us = 2s 500_000_000ns
    let d2 = Duration.from_micros(2_500_000)
    assert(d2.secs == (Int64)2, "micros secs")
    assert(d2.nanos == (Int64)500_000_000, "micros nanos")
    print_line("micros_ok")

    // Test from_millis: 3_500 ms = 3s 500_000_000ns
    let d3 = Duration.from_millis(3_500)
    assert(d3.secs == (Int64)3, "millis secs")
    assert(d3.nanos == (Int64)500_000_000, "millis nanos")
    print_line("millis_ok")

    // Test from_secs
    let d4 = Duration.from_secs(42)
    assert(d4.secs == (Int64)42, "secs secs")
    assert(d4.nanos == (Int64)0, "secs nanos")
    print_line("secs_ok")

    // Test from_mins: 5 min = 300s
    let d5 = Duration.from_mins(5)
    assert(d5.secs == (Int64)300, "mins secs")
    assert(d5.nanos == (Int64)0, "mins nanos")
    print_line("mins_ok")

    // Test from_hours: 2 h = 7200s
    let d6 = Duration.from_hours(2)
    assert(d6.secs == (Int64)7200, "hours secs")
    assert(d6.nanos == (Int64)0, "hours nanos")
    print_line("hours_ok")

    // Property 2: Normalization invariant - nanos always in [0, 1_000_000_000)
    let d7 = Duration.from_nanos(999_999_999)
    assert(d7.nanos >= (Int64)0, "norm lower")
    assert(d7.nanos < (Int64)1_000_000_000, "norm upper")
    let d8 = Duration.from_millis(999)
    assert(d8.nanos >= (Int64)0, "norm2 lower")
    assert(d8.nanos < (Int64)1_000_000_000, "norm2 upper")
    print_line("nanos_normalized")

    // Property 1: Round-trip consistency
    assert(Duration.from_nanos(500_000_000).as_nanos() == (Int64)500_000_000, "rt nanos")
    print_line("roundtrip_nanos")

    assert(Duration.from_micros(1_500).as_micros() == (Int64)1_500, "rt micros")
    print_line("roundtrip_micros")

    assert(Duration.from_millis(500).as_millis() == (Int64)500, "rt millis")
    print_line("roundtrip_millis")

    assert(Duration.from_secs(60).as_seconds() == (Int64)60, "rt secs")
    print_line("roundtrip_secs")

    assert(Duration.from_mins(30).as_minutes() == (Int64)30, "rt mins")
    print_line("roundtrip_mins")

    assert(Duration.from_hours(24).as_hours() == (Int64)24, "rt hours")
    print_line("roundtrip_hours")

    yield 0
}
