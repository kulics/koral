// EXPECT: nanos_ok
// EXPECT: micros_ok
// EXPECT: millis_ok
// EXPECT: secs_ok
// EXPECT: mins_ok
// EXPECT: hours_ok
// EXPECT: nanos_normalized
// EXPECT: roundtrip_nanos
// EXPECT: roundtrip_micros
// EXPECT: roundtrip_millis
// EXPECT: roundtrip_secs
// EXPECT: roundtrip_mins
// EXPECT: roundtrip_hours

let main() Int = {
    // Test from_nanoseconds: 1_500_000_000 ns = 1s 500_000_000ns
    let d1 = Duration.from_nanoseconds(1_500_000_000)
    assert(d1.secs == (Int64)1, "nanos secs")
    assert(d1.nanos == (Int64)500_000_000, "nanos nanos")
    println("nanos_ok")

    // Test from_microseconds: 2_500_000 us = 2s 500_000_000ns
    let d2 = Duration.from_microseconds(2_500_000)
    assert(d2.secs == (Int64)2, "micros secs")
    assert(d2.nanos == (Int64)500_000_000, "micros nanos")
    println("micros_ok")

    // Test from_milliseconds: 3_500 ms = 3s 500_000_000ns
    let d3 = Duration.from_milliseconds(3_500)
    assert(d3.secs == (Int64)3, "millis secs")
    assert(d3.nanos == (Int64)500_000_000, "millis nanos")
    println("millis_ok")

    // Test from_seconds
    let d4 = Duration.from_seconds(42)
    assert(d4.secs == (Int64)42, "secs secs")
    assert(d4.nanos == (Int64)0, "secs nanos")
    println("secs_ok")

    // Test from_minutes: 5 min = 300s
    let d5 = Duration.from_minutes(5)
    assert(d5.secs == (Int64)300, "mins secs")
    assert(d5.nanos == (Int64)0, "mins nanos")
    println("mins_ok")

    // Test from_hours: 2 h = 7200s
    let d6 = Duration.from_hours(2)
    assert(d6.secs == (Int64)7200, "hours secs")
    assert(d6.nanos == (Int64)0, "hours nanos")
    println("hours_ok")

    // Property 2: Normalization invariant - nanos always in [0, 1_000_000_000)
    let d7 = Duration.from_nanoseconds(999_999_999)
    assert(d7.nanos >= (Int64)0, "norm lower")
    assert(d7.nanos < (Int64)1_000_000_000, "norm upper")
    let d8 = Duration.from_milliseconds(999)
    assert(d8.nanos >= (Int64)0, "norm2 lower")
    assert(d8.nanos < (Int64)1_000_000_000, "norm2 upper")
    println("nanos_normalized")

    // Property 1: Round-trip consistency
    assert(Duration.from_nanoseconds(500_000_000).as_nanoseconds() == (Int64)500_000_000, "rt nanos")
    println("roundtrip_nanos")

    assert(Duration.from_microseconds(1_500).as_microseconds() == (Int64)1_500, "rt micros")
    println("roundtrip_micros")

    assert(Duration.from_milliseconds(500).as_milliseconds() == (Int64)500, "rt millis")
    println("roundtrip_millis")

    assert(Duration.from_seconds(60).as_seconds() == (Int64)60, "rt secs")
    println("roundtrip_secs")

    assert(Duration.from_minutes(30).as_minutes() == (Int64)30, "rt mins")
    println("roundtrip_mins")

    assert(Duration.from_hours(24).as_hours() == (Int64)24, "rt hours")
    println("roundtrip_hours")

    yield 0
}
