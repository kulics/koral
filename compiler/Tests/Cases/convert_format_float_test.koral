// std.convert float formatting tests
// EXPECT: fixed_ok
// EXPECT: fixed_prec_ok
// EXPECT: sci_ok
// EXPECT: sci_upper_ok
// EXPECT: percent_ok
// EXPECT: nan_ok
// EXPECT: inf_ok
// EXPECT: neg_inf_ok
// EXPECT: width_ok
// EXPECT: sign_plus_ok
// EXPECT: f32_ok

using std.convert

let main() Int = {
    // Fixed format (default precision 6)
    let s1 = 3.14159.format("f")
    if s1.starts_with("3.1415") then println("fixed_ok")
    else println("FAIL fixed: " + s1)

    // Fixed with precision 2
    let s2 = 3.14159.format(".2f")
    if s2.equals("3.14") then println("fixed_prec_ok")
    else println("FAIL fixed_prec: " + s2)

    // Scientific notation
    let s3 = 1500.0.format(".2e")
    if s3.equals("1.50e+03") then println("sci_ok")
    else println("FAIL sci: " + s3)

    // Scientific uppercase
    let s4 = 1500.0.format(".2E")
    if s4.equals("1.50E+03") then println("sci_upper_ok")
    else println("FAIL sci_upper: " + s4)

    // Percentage
    let s5 = 0.125.format(".1%")
    if s5.equals("12.5%") then println("percent_ok")
    else println("FAIL percent: " + s5)

    // NaN
    let nan = Float64.nan()
    if nan.format("f").equals("NaN") then println("nan_ok")
    else println("FAIL nan: " + nan.format("f"))

    // Inf
    let inf = Float64.inf()
    if inf.format("f").equals("Inf") then println("inf_ok")
    else println("FAIL inf: " + inf.format("f"))

    // -Inf
    let neg_inf = 0.0 - Float64.inf()
    if neg_inf.format("f").equals("-Inf") then println("neg_inf_ok")
    else println("FAIL neg_inf: " + neg_inf.format("f"))

    // Width
    let s6 = 3.14.format("10.2f")
    if s6.equals("      3.14") then println("width_ok")
    else println("FAIL width: [" + s6 + "]")

    // Sign +
    let s7 = 3.14.format("+.2f")
    if s7.equals("+3.14") then println("sign_plus_ok")
    else println("FAIL sign_plus: " + s7)

    // Float32
    let f32 Float32 = 2.5
    let s8 = f32.format(".1f")
    if s8.equals("2.5") then println("f32_ok")
    else println("FAIL f32: " + s8)

    yield 0
}
