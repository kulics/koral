// EXPECT: Start Value
// EXPECT: End Value
// EXPECT: Drop Tracker
// EXPECT: 1
// EXPECT: Start Ref
// EXPECT: End Ref
// EXPECT: Drop Tracker
// EXPECT: 3
// EXPECT: Start Scope
// EXPECT: Drop Tracker
// EXPECT: 2
// EXPECT: End Scope

public type Tracker(id Int)

given Tracker {
    __drop(self ref) = {
        print_line("Drop Tracker")
        print_line(self.id)
    }
}

let test_value() Void = {
    print_line("Start Value")
    let t = Tracker(1)
    print_line("End Value")
}

let test_ref() Void = {
    print_line("Start Ref")
    let r = ref Tracker(3)
    print_line("End Ref")
}

let test_scope() Void = {
    print_line("Start Scope")
    if true then {
        let t = Tracker(2)
    } else {}
    print_line("End Scope")
}

public let main() Int = {
    test_value()
    test_ref()
    test_scope()
    0
}
