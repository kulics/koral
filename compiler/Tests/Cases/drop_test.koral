// EXPECT: Start Value
// EXPECT: End Value
// EXPECT: Drop Tracker
// EXPECT: 1
// EXPECT: Start Ref
// EXPECT: End Ref
// EXPECT: Drop Tracker
// EXPECT: 3
// EXPECT: Start Scope
// EXPECT: Drop Tracker
// EXPECT: 2
// EXPECT: End Scope

public type Tracker(id Int);

given Tracker {
    __drop(self Tracker ref) = {
        print_string("Drop Tracker");
        print_int(self.id);
    };
};

let test_value() Void = {
    print_string("Start Value");
    let t = Tracker(1);
    print_string("End Value");
};

let test_ref() Void = {
    print_string("Start Ref");
    let r = ref Tracker(3);
    print_string("End Ref");
};

let test_scope() Void = {
    print_string("Start Scope");
    if true then {
        let t = Tracker(2);
    } else {};
    print_string("End Scope");
};

public let main() Int = {
    test_value();
    test_ref();
    test_scope();
    0
};
