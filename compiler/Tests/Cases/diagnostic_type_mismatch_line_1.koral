// EXPECT-ERROR: diagnostic_type_mismatch_line_1.koral:19:13: error: Type mismatch: expected [UInt8]List, got String

// Regression target #1:
// - comments + blank lines should not shift error away from real call site
// - nested block should still report the argument mismatch location

let takes_bytes_1(bytes [UInt8]List) Void = {}

let main() Void = {
    let mut header = "begin"
    let mut count UInt = 1

    if header.count() > 0 then {
        // unrelated work before the failing call
        count += 2

        {
            let payload = "abc"
            takes_bytes_1(payload)
        }
    }
}
