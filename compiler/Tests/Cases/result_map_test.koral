// Test Result.map generic method
// EXPECT: 84
// EXPECT: Error preserved

let main() Int = {
    // Test map on Ok
    let ok_result = [Int]Result.Ok(42)
    let doubled = ok_result.[Int]map((x) -> x * 2)
    
    when doubled is {
        .Ok(v) then println(v.to_string()),
        .Error(e) then println(e.message()),
    }
    
    // Test map on Error
    let err_result = [Int]Result.Error(ref "Error preserved")
    let mapped_err = err_result.[Int]map((x) -> x * 2)
    
    when mapped_err is {
        .Ok(v) then println(v.to_string()),
        .Error(e) then println(e.message()),
    }
    
    yield 0
}
