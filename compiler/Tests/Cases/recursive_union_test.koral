// Test case for recursive union with generic type

public type Expr {
    Number(value Int),
    BinaryOp(left Expr ref, right Expr ref),
    FunctionCall(name String, args [Expr ref]List),
}

public let parse() [Expr ref, String]Result = {
    let expr = ref Expr.Number(42)
    [Expr ref, String]Result.Ok(expr)
}

public let main() Void = {
    when parse() is {
        .Ok(expr) then print_line("Test passed!"),
        .Error(msg) then print_line(msg),
    }
}
