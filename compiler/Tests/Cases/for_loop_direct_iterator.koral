// Test for loop with direct iterator expressions
// The expression itself implements Iterator, so no iterator() call is needed

// EXPECT: 1
// EXPECT: 2
// EXPECT: 3
// EXPECT: hello
// EXPECT: world
// EXPECT: test
// EXPECT: Mixed test passed

let main() Void = {
    // Test 1: ListIterator used directly
    let mut list = [Int]List.new()
    list.push(1)
    list.push(2)
    list.push(3)
    
    // Get the iterator directly and use it in for loop
    let mut iter = list.iterator()
    for x = iter then {
        print_line(x)
    }
    
    // Test 2: String split iterator used directly
    let text = "hello world test"
    let mut splitIter = text.split_ascii_whitespace()
    for word = splitIter then {
        print_line(word)
    }
    
    // Test 3: Mixed - same file uses both direct iterator and iterable
    let mut list2 = [Int]List.new()
    list2.push(10)
    list2.push(20)
    
    // This uses the iterable (calls iterator() internally)
    let mut sum = 0
    for n = list2 then {
        sum = sum + n
    }
    
    // This uses direct iterator
    let mut list3 = [Int]List.new()
    list3.push(100)
    let mut iter3 = list3.iterator()
    for m = iter3 then {
        sum = sum + m
    }
    
    if sum == 130 then {
        print_line("Mixed test passed")
    }
}
