// EXPECT: drop_count
// EXPECT: 2

type Tracker(id Int)

let mut drop_count Int = 0

given Tracker {
    __drop(self ref) = {
        drop_count = drop_count + 1
    }
}

let main() Int = {
    if true then {
        let t = Tracker(1)
        let f [Int]Func = () -> t.id
        let g = f
    } else {}

    print_line("drop_count")
    print_line(drop_count)
    0
}
