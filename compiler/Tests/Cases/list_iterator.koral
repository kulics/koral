let test_iterator() Void = {
    let list = [Int]List.new();
    list.push_back(10);
    list.push_back(20);
    list.push_back(30);

    let mut iter [Int]ListIterator = list.iterator();

    let val1 = iter.next();
    val1 match {
        .Some(v) -> { 
             if v <> 10 then panic("Expected 10"); 
             print_int(v); // EXPECT: 10
        }
        .None -> panic("Expected 10, got None");
    };

    iter.next() match {
        .Some(v) -> { 
             if v <> 20 then panic("Expected 20"); 
             print_int(v); // EXPECT: 20
        }
        .None -> panic("Expected 20, got None");
    };

    iter.next() match {
        .Some(v) -> { 
             if v <> 30 then panic("Expected 30"); 
             print_int(v); // EXPECT: 30
        }
        .None -> panic("Expected 30, got None");
    };

    iter.next() match {
        .Some(_) -> panic("Expected None");
        .None -> {
             print_int(0); // EXPECT: 0
        }
    };
};

let main() Int = {
    test_iterator();
    0
}
