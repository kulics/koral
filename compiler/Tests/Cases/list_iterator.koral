let test_iterator() Void = {
    let list = [Int]List.new()
    list.push_back(10)
    list.push_back(20)
    list.push_back(30)

    let mut iter [Int]ListIterator = list.iterator()

    let val1 = iter.next()
    when val1 is {
        .Some(v) then { 
             if v <> 10 then panic("Expected 10")
             print_int(v) // EXPECT: 10
        },
        .None then panic("Expected 10, got None"),
    }

    when iter.next() is {
        .Some(v) then { 
             if v <> 20 then panic("Expected 20")
             print_int(v) // EXPECT: 20
        },
        .None then panic("Expected 20, got None"),
    }

    when iter.next() is {
        .Some(v) then { 
             if v <> 30 then panic("Expected 30")
             print_int(v) // EXPECT: 30
        },
        .None then panic("Expected 30, got None"),
    }

    when iter.next() is {
        .Some(_) then panic("Expected None"),
        .None then {
             print_int(0) // EXPECT: 0
        },
    }
}

let main() Int = {
    test_iterator()
    0
}
