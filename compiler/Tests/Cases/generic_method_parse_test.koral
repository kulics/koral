// Test parsing of generic methods
// EXPECT: 42

public type [T Any] Box {
    Value(v T),
}

given [T Any] [T]Box {
    public unwrap(self) T = when self in {
        .Value(v) then v,
    }
    
    // Method with method-level type parameter
    public [U Any]transform(self, f [T, U]Func) U = f(self.unwrap())
}

let main() Int = {
    let box = [Int]Box.Value(42)
    let result = box.[Int]transform((x) -> x)
    println(result.to_string())
    yield 0
}
