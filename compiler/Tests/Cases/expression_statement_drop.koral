// EXPECT: drop_count
// EXPECT: 3

type Tracker(id Int)

let mut drop_count Int = 0

given Tracker {
    __drop(self ref) = {
        drop_count = drop_count + 1
    }
}

type Wrapper(id Int)

given Wrapper {
    make(self) Tracker = Tracker(self.id)
}

type Maker()

given Maker {
    new() Tracker = Tracker(3)
}

let make_tracker(id Int) Tracker = Tracker(id)

let main() Int = {
    make_tracker(1)
    Wrapper(2).make()
    Maker.new()
    print_line("drop_count")
    print_line(drop_count)
    0
}
