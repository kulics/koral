// EXPECT: 42
// EXPECT: 100
// EXPECT: 50
// EXPECT: 6
// EXPECT: 7
// EXPECT: 9

type MyOption {
    None(),
    Some(val Int),
}

let main() Int = {
  let x = MyOption.Some(42)
  let y = MyOption.None()

  // Basic Match on Union
  let res1 = when x in {
      .Some(v) then v,
      .None then 0,
  }
  println(res1)
  
  // Re-create x for next test (because x was moved)
  let x2 = MyOption.Some(42)

  // Match with Wildcard
  let res2 = when x2 in {
      .None then 0,
      _ then 100,
  }
  println(res2)
  
  // Literal Match
  let numInt = 5
  let res3 = when numInt in {
      1 then 10,
      5 then 50,
      _ then 0,
  }
  println(res3)
  
  // Variable binding check
  let res4 = when numInt in {
      z then z + 1,
  }
  println(res4)

  // String literal pattern match
  let s = "hi"
  let res5 = when s in {
      "hi" then 7,
      _ then 0,
  }
  println(res5)

  let res6 = when s in {
      "bye" then 1,
      _ then 9,
  }
  println(res6)
  
  yield 0
}
