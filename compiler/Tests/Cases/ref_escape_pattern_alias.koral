// EXPECT: boom

let make(opt [String]Option) [String]Result = when opt in {
    .Some(e) then .Error(ref e),
    .None then .Ok("ok"),
}

let main() Void = {
    let r = make(.Some("boom"))
    when r in {
        .Error(e) then println(e.message()),
        .Ok(v) then println(v),
    }
}
