// Test exhaustiveness checking for pattern matching
// EXPECT: 1
// EXPECT: 2
// EXPECT: 3
// EXPECT: 4
// EXPECT: 5

type Color {
    Red(),
    Green(),
    Blue(),
}

type MyOption {
    None(),
    Some(val Int),
}

let main() Int = {
    // Test 1: Union type with all cases covered
    let c = Color.Red()
    let res1 = when c in {
        .Red then 1,
        .Green then 2,
        .Blue then 3,
    }
    println(res1)
    
    // Test 2: Union type with wildcard as catchall
    let c2 = Color.Green()
    let res2 = when c2 in {
        .Red then 1,
        _ then 2,
    }
    println(res2)
    
    // Test 3: Bool type with both values covered
    let b = true
    let res3 = when b in {
        true then 3,
        false then 0,
    }
    println(res3)
    
    // Test 4: Int type with variable binding (catchall)
    let n = 42
    let res4 = when n in {
        1 then 0,
        2 then 0,
        x then 4,
    }
    println(res4)
    
    // Test 5: Nested union with all cases
    let opt = MyOption.Some(5)
    let res5 = when opt in {
        .Some(v) then v,
        .None then 0,
    }
    println(res5)
    
    yield 0
}
