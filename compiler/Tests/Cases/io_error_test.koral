// EXPECT: All IoError tests passed

using std.io.*

let main() Void = {
    // IoError.InvalidUtf8 message
    let e1 = IoError.InvalidUtf8()
    assert(e1.message() == "invalid UTF-8 sequence", "InvalidUtf8 message")

    // IoError.WriteZero message
    let e2 = IoError.WriteZero()
    assert(e2.message() == "write returned zero bytes", "WriteZero message")

    // IoError.Other message passthrough
    let e3 = IoError.Other("disk full")
    assert(e3.message() == "disk full", "Other message")

    let e4 = IoError.Other("connection reset")
    assert(e4.message() == "connection reset", "Other message 2")

    // SeekPos construction
    let s1 = SeekPos.Start((UInt64)0)
    let s2 = SeekPos.End((Int64)0 - 10)
    let s3 = SeekPos.Current((Int64)5)
    when s1 is {
        .Start(o) then assert(o == (UInt64)0, "Start offset"),
        _ then assert(false, "Start match"),
    }
    when s2 is {
        .End(o) then assert(o == (Int64)0 - 10, "End offset"),
        _ then assert(false, "End match"),
    }
    when s3 is {
        .Current(o) then assert(o == (Int64)5, "Current offset"),
        _ then assert(false, "Current match"),
    }

    print_line("All IoError tests passed")
}
