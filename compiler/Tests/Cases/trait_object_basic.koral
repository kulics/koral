// Test trait object creation and explicit Wrapper trait implementation
// EXPECT: hello from Greeter
// EXPECT: wrapped(hello from Greeter)

trait Greet {
    greet(self) String
}

type Greeter(name String)

given Greeter Greet {
    public greet(self) String = "hello from " + self.name
}

type Wrapper(inner Greet ref)

given Wrapper Greet {
    public greet(self) String = {
        let mut s = "wrapped("
        s.push_string(self.inner.greet())
        s.push_string(")")
        yield s
    }
}

let main() Int = {
    let g1 = ref Greeter("Greeter")
    let g Greet ref = g1
    println(g.greet())

    let w = ref Wrapper(g)
    let g2 Greet ref = w
    println(g2.greet())

    yield 0
}
