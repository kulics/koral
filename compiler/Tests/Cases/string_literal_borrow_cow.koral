// EXPECT: literal_capacity_ok
// EXPECT: literal_cow_ok
// EXPECT: pattern_literal_ok

let main() Void = {
    let s = "abc"
    assert(s.capacity() == (UInt)3, "literal capacity should be len")
    println("literal_capacity_ok")

    let mut t = s
    let bang UInt8 = 33
    t.push(bang)
    assert(s == "abc", "literal source should remain unchanged after COW")
    assert(t == "abc!", "mutated copy should change")
    println("literal_cow_ok")

    let msg = "hello"
    let tag = when msg in {
        "hello" then "hit",
        _ then "miss",
    }
    assert(tag == "hit", "string literal pattern should match")
    println("pattern_literal_ok")
}
