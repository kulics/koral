// std.math integer unit tests
// EXPECT: abs_ok
// EXPECT: ipow_ok
// EXPECT: gcd_ok
// EXPECT: lcm_ok
// EXPECT: ilog_ok
// EXPECT: wrapping_ok
// EXPECT: zero_ok
// EXPECT: uint_ok

using std.math.*

let main() Int = {
    // abs
    if (-5).abs() == 5 and 0.abs() == 0 and 5.abs() == 5 then {
        println("abs_ok")
    }

    // pow (member)
    if 2.pow(10) == 1024 and 3.pow(0) == 1 then {
        println("ipow_ok")
    }

    // gcd
    if gcd(12, 8) == 4 and gcd(7, 13) == 1 and gcd(-12, 8) == 4 then {
        println("gcd_ok")
    }

    // lcm
    if lcm(4, 6) == 12 and lcm(3, 5) == 15 and lcm(-4, 6) == 12 then {
        println("lcm_ok")
    }

    // ilog2, ilog10
    if ilog2(8) == 3 and ilog2(1) == 0 and ilog2(15) == 3 and ilog10(1000) == 3 and ilog10(1) == 0 and ilog10(999) == 2 then {
        println("ilog_ok")
    }

    // wrapping_abs, wrapping_pow
    let wa = Int8.min().wrapping_abs()
    let wp = 2.wrapping_pow(64)
    // wrapping_abs of Int8.min() wraps to Int8.min() (-128)
    // wrapping_pow(2, 64) wraps to 0
    if wa == Int8.min() and wp == 0 then {
        println("wrapping_ok")
    }

    // zero edge cases
    if gcd(0, 5) == 5 and gcd(5, 0) == 5 and gcd(0, 0) == 0 and lcm(0, 5) == 0 and lcm(0, 0) == 0 then {
        println("zero_ok")
    }

    // UInt operations (through Integer trait)
    let up = ((UInt)2).pow(10)
    let ug = gcd((UInt)12, (UInt)8)
    let ul = lcm((UInt)4, (UInt)6)
    let ui2 = ilog2((UInt)8)
    let ui10 = ilog10((UInt)1000)
    if up == 1024 and ug == 4 and ul == 12 and ui2 == 3 and ui10 == 3 then {
        println("uint_ok")
    }

    yield 0
}
