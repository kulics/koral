// Test break and continue in for loops

// EXPECT: Break test:
// EXPECT: 1
// EXPECT: 2
// EXPECT: 3
// EXPECT: Continue test (skip evens):
// EXPECT: 1
// EXPECT: 3
// EXPECT: 5
// EXPECT: Nested break test:
// EXPECT: outer=1, inner stopped at 3
// EXPECT: outer=2, inner stopped at 3
// EXPECT: All control flow tests passed

let main() Void = {
    // Test 1: break exits the loop early
    print_line("Break test:")
    let mut list = [Int]List.new()
    list.push_back(1)
    list.push_back(2)
    list.push_back(3)
    list.push_back(4)
    list.push_back(5)
    
    for x = list then {
        if x > 3 then {
            break
        }
        print_line(x)
    }
    
    // Test 2: continue skips to next iteration
    print_line("Continue test (skip evens):")
    let mut list2 = [Int]List.new()
    list2.push_back(1)
    list2.push_back(2)
    list2.push_back(3)
    list2.push_back(4)
    list2.push_back(5)
    
    for x = list2 then {
        if x % 2 == 0 then {
            continue
        }
        print_line(x)
    }
    
    // Test 3: break in nested loop only exits inner loop
    print_line("Nested break test:")
    let mut outer = [Int]List.new()
    outer.push_back(1)
    outer.push_back(2)
    
    let mut inner = [Int]List.new()
    inner.push_back(1)
    inner.push_back(2)
    inner.push_back(3)
    inner.push_back(4)
    inner.push_back(5)
    
    for o = outer then {
        let mut lastInner = 0
        for i = inner then {
            if i > 3 then {
                break
            }
            lastInner = i
        }
        print("outer=")
        print(o)
        print(", inner stopped at ")
        print_line(lastInner)
    }
    
    print_line("All control flow tests passed")
}
